# 高级排序（O(n*logn)）

## 1、归并排序

```javascript
// 写出归并的大致逻辑
function mergeSort(arr = [8, 2, 4, 9, 3, 7, 1, 6, 5]) {
    // 从下到上不断合并数组
    function __merge(arr, l, mid, r) {
        // TODO
    }

    // 从上到下不断平分数组
    function __mergeSort(arr, l, r) {
        // 递归结束的条件
        if (l >= r) return;

        const mid = (l + r) / 2;
        __mergeSort(arr, l, mid);
        __mergeSort(arr, mid + 1, r);
        __merge(arr, l, mid, r);
    }

    __mergeSort(arr, 0, arr.length - 1);

    return arr;
}
```

```javascript
function mergeSort(arr = [13, 8, 2, 4, 12, 9, 3, 7, 11, 1, 6, 5, 10, 14]) {
    // 从下到上不断合并数组
    function __merge(arr, l, mid, r) {
        const aux = arr.slice(l, r + 1); // auxiliary(辅助)的缩写
        let k = l,
            i = l,
            j = mid + 1;
        for (; k <= r; k++) {
            if (i > mid) {
                arr[k] = aux[j - l];
                j++;
            } else if (j > r) {
                arr[k] = aux[i - l];
                i++;
            } else if (aux[i - l] > aux[j - l]) {
                arr[k] = aux[j - l];
                j++;
            } else {
                arr[k] = aux[i - l];
                i++;
            }
        }
    }

    // 从上到下不断平分数组
    function __mergeSort(arr, l, r) {
        // 递归结束的条件
        if (l >= r) return;

        const mid = Math.floor((l + r) / 2);
        __mergeSort(arr, l, mid);
        __mergeSort(arr, mid + 1, r);
        __merge(arr, l, mid, r);
    }

    __mergeSort(arr, 0, arr.length - 1);

    return arr;
}
```

## 2、快速排序

```javascript
function quickSort(arr = [8, 2, 4, 9, 3, 7, 1, 6, 5]) {
    function __partition(arr, l, r) {
        const v = arr[l];
        let j = l;
        for (let i = l + 1; i <= r; i++) {
            if (arr[i] < v) {
                [arr[j + 1], arr[i]] = [arr[i], arr[j + 1]];
                j++;
            }
        }
        [arr[l], arr[j]] = [arr[j], arr[l]];

        return j;
    }

    function __quickSort(arr, l, r) {
        // 递归结束的条件
        if (l >= r) return;

        let p = __partition(arr, l, r);
        __quickSort(arr, l, p - 1);
        __quickSort(arr, p + 1, r);
    }

    __quickSort(arr, 0, arr.length - 1);

    return arr;
}
```
